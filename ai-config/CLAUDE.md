# User CLAUDE.md

## 日本語応答ポリシー

日本のプロジェクトでは、すべての応答を日本語で行う。

### 適用範囲
- ユーザーとの対話
- 質問への回答
- 説明文
- エラーメッセージ
- 進捗報告
- コード実装時の説明

### 例外
- コード内のコメント（プロジェクトの慣習に従う）
- 技術的な変数名や関数名
- 外部ライブラリのAPI名称

### 判定基準
- プロジェクト名が日本語
- CLAUDE.mdに日本語での指示がある
- ユーザーが日本語で話しかけている

## Development Flow

- **1メソッド追加 = 1テスト追加** - 新しいメソッドを追加したら必ず対応するテストも追加すること
- **日本語テスト名を使う場合** - `//noinspection NonAsciiCharacters` を追加してIDE警告を抑制する。まず `#[cfg(test)] mod tests` の直前に配置し、効果がなければファイル先頭に配置する

## アーキテクチャ原則

### Handler の責務
Handler（Server Function）の役割は以下に限定する：
1. HTTPからInputを受け取る
2. HTTP非依存の適切なデータ形式に変換する
3. Serviceに処理を委譲する
4. 結果に応じてステータスコードとレスポンスを決定する

**バリデーションはService層で行う** - HandlerはHTTP層の変換のみを担当し、ビジネスロジック（バリデーション含む）はService層に委譲する
